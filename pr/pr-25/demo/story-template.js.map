{"version":3,"file":"story-template.js","sourceRoot":"","sources":["../../demo/story-template.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,GAAG,EACH,IAAI,EACJ,UAAU,EACV,OAAO,GAGR,MAAM,KAAK,CAAC;AACb,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAC9C,OAAO,EAAE,SAAS,EAAE,MAAM,8BAA8B,CAAC;AAEzD,OAAO,sBAAsB,CAAC;AAC9B,OAAO,WAAW,MAAM,0BAA0B,CAAC;AAEnD,OAAO,KAAK,MAAM,aAAa,CAAC;AAChC,OAAO,QAAQ,MAAM,iBAAiB,CAAC;AAavC;;GAEG;AAEI,IAAM,aAAa,GAAnB,MAAM,aAAc,SAAQ,UAAU;IAAtC;;QACuB,eAAU,GAAG,EAAE,CAAC;QAEhB,iBAAY,GAAG,EAAE,CAAC;QAIjB,SAAI,GAAG,KAAK,CAAC;QAEzB,YAAO,GAAG,KAAK,CAAC;QAKjC,0EAA0E;QACzD,+BAA0B,GAAY,KAAK,CAAC;IAuL/D,CAAC;IAlLC,MAAM;QACJ,OAAO,IAAI,CAAA;;oBAEK,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;;sCAElB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;kBAC9C,KAAK;yBACE,IAAI,CAAC,UAAU,eAAe,IAAI,CAC/C,IAAI,CAAC,IAAI,EACT,GAAG,EAAE,CACH,IAAI,CAAA;sBACI,QAAQ;;;;iBAIb,CACN;;;QAGH,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC;KACrD,CAAC;IACJ,CAAC;IAED,IAAY,mBAAmB;QAC7B,OAAO,IAAI,CAAA;;;4CAG6B,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC;;;;oCAIrC,IAAI,CAAC,UAAU;;;kBAGjC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO;;UAExC,IAAI,CAAC,qBAAqB;UAC1B,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,IAAI,CAAA,oBAAoB,CAAC,CAAC,CAAC,OAAO;;;mBAG3D,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE;wBAClD,IAAI,CAAC,wBAAwB;;;;;KAKhD,CAAC;IACJ,CAAC;IAED,IAAY,qBAAqB;QAC/B,IAAI,CAAC,IAAI,CAAC,cAAc;YAAE,OAAO,OAAO,CAAC;QAEzC,OAAO,IAAI,CAAA;;;;YAIH,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,GAAG,CAChC,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAA;;;+BAGI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC;uBACnC,KAAK,CAAC,KAAK;;;;;yBAKT,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC;;2BAEzB,KAAK,CAAC,SAAS,IAAI,MAAM;4BACxB,KAAK,CAAC,YAAY,IAAI,EAAE;oCAChB,KAAK,CAAC,WAAW;;;;aAIxC,CACF;;yBAEc,IAAI,CAAC,WAAW;;KAEpC,CAAC;IACJ,CAAC;IAED,IAAY,UAAU;QACpB,OAAO;UACD,IAAI,CAAC,UAAU;WACd,IAAI,CAAC,gBAAgB,YAAY,IAAI,CAAC,UAAU;KACtD,CAAC;IACJ,CAAC;IAED,IAAY,OAAO;QACjB,IAAI,CAAC,IAAI,CAAC,aAAa;YAAE,OAAO,EAAE,CAAC;QACnC,OAAO;;EAET,IAAI,CAAC,UAAU;IACb,IAAI,CAAC,aAAa;;KAEjB,CAAC;IACJ,CAAC;IAED,IAAY,gBAAgB;QAC1B,OAAO,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC;IACnD,CAAC;IAED,IAAY,UAAU;QACpB,OAAO,IAAI,CAAC,IAAI;YACd,CAAC,CAAC,kCAAkC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,EAAE;YACxE,CAAC,CAAC,6BAA6B,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;IACxE,CAAC;IAED,yFAAyF;IACjF,wBAAwB,CAAC,CAAQ;QACvC,MAAM,eAAe,GAAI,CAAC,CAAC,MAA0B,CAAC,gBAAgB,EAAE,CAAC;QACzE,IAAI,CAAC,0BAA0B,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;IAC/D,CAAC;IAED,uCAAuC;IAC/B,WAAW;QACjB,MAAM,aAAa,GAAa,EAAE,CAAC;QAEnC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;YAClC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,KAAK;gBAAE,OAAO;YACpD,aAAa,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;QACnE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAClD,CAAC;IAED,0EAA0E;IAClE,SAAS,CAAC,KAAa;QAC7B,OAAO,KAAK,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAClD,CAAC;IAED,MAAM,KAAK,MAAM;QACf,OAAO;YACL,WAAW;YACX,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAwCF;SACF,CAAC;IACJ,CAAC;CACF,CAAA;AArM6B;IAA3B,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;iDAAiB;AAEhB;IAA3B,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;mDAAmB;AAElB;IAA3B,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;qDAAiC;AAE/B;IAA5B,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;2CAAc;AAEzB;IAAhB,KAAK,EAAE;8CAAyB;AAGhB;IAAhB,KAAK,EAAE;oDAAgC;AAGvB;IAAhB,KAAK,EAAE;iEAAqD;AAGrD;IADP,QAAQ,CAAC,cAAc,CAAC;kDAC0B;AAlBxC,aAAa;IADzB,aAAa,CAAC,gBAAgB,CAAC;GACnB,aAAa,CAsMzB","sourcesContent":["import {\n  css,\n  html,\n  LitElement,\n  nothing,\n  TemplateResult,\n  type CSSResultGroup,\n} from 'lit';\nimport { property, queryAll, state } from 'lit/decorators.js';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { when } from 'lit/directives/when.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\nimport './syntax-highlighter';\nimport themeStyles from '@src/themes/theme-styles';\n\nimport arrow from './arrow.svg';\nimport testTube from './test-tube.svg';\n\nexport type StyleInputSettings = {\n  label: string;\n  cssVariable: string;\n  defaultValue?: string;\n  inputType?: 'color' | 'text';\n};\n\nexport type StyleInputData = {\n  settings: StyleInputSettings[];\n};\n\n/**\n * A template for demoing the use of a custom element.\n */\n@customElement('story-template')\nexport class StoryTemplate extends LitElement {\n  @property({ type: String }) elementTag = '';\n\n  @property({ type: String }) exampleUsage = '';\n\n  @property({ type: Object }) styleInputData?: StyleInputData;\n\n  @property({ type: Boolean }) labs = false;\n\n  @state() private visible = false;\n\n  /* Stringified styles applied for the demo component */\n  @state() private appliedStyles?: string;\n\n  /* Whether settings inputs have been slotted in and should be displayed */\n  @state() private shouldShowPropertySettings: boolean = false;\n\n  @queryAll('.style-input')\n  private styleInputs?: NodeListOf<HTMLInputElement>;\n\n  render() {\n    return html`\n      <h2>\n        <a @click=${() => (this.visible = !this.visible)}>\n          <img\n            class=\"disclosure-arrow ${this.visible ? 'open' : ''}\"\n            src=${arrow}\n          /><code> &lt;${this.elementTag}&gt;</code> ${when(\n            this.labs,\n            () =>\n              html`<img\n                src=${testTube}\n                alt=\"Labs icon\"\n                title=\"Labs\"\n                class=\"labs-icon\"\n              />`,\n          )}\n        </a>\n      </h2>\n      ${when(this.visible, () => this.elementDemoTemplate)}\n    `;\n  }\n\n  private get elementDemoTemplate() {\n    return html`\n      <div id=\"container\">\n        <h3>Demo</h3>\n        <div class=\"slot-container\" style=${ifDefined(this.appliedStyles)}>\n          <slot name=\"demo\"></slot>\n        </div>\n        <h3>Import</h3>\n        <syntax-highlighter .code=${this.importCode}></syntax-highlighter>\n        <h3>Usage</h3>\n        <syntax-highlighter\n          .code=${this.exampleUsage + this.cssCode}\n        ></syntax-highlighter>\n        ${this.styleSettingsTemplate}\n        ${this.shouldShowPropertySettings ? html` <h3>Settings</h3>` : nothing}\n        <div\n          class=\"slot-container\"\n          style=\"${!this.shouldShowPropertySettings ? 'display: none' : ''}\"\n          @slotchange=${this.handleSettingsSlotChange}\n        >\n          <slot name=\"settings\"></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  private get styleSettingsTemplate(): TemplateResult | typeof nothing {\n    if (!this.styleInputData) return nothing;\n\n    return html`\n      <h3>Styles</h3>\n      <div class=\"style-options\">\n        <table>\n          ${this.styleInputData.settings.map(\n            (input) => html`\n              <tr>\n                <td>\n                  <label for=${this.labelToId(input.label)}\n                    >${input.label}</label\n                  >\n                </td>\n                <td>\n                  <input\n                    id=${this.labelToId(input.label)}\n                    class=\"style-input\"\n                    type=${input.inputType ?? 'text'}\n                    value=${input.defaultValue ?? ''}\n                    data-variable=${input.cssVariable}\n                  />\n                </td>\n              </tr>\n            `,\n          )}\n        </table>\n        <button @click=${this.applyStyles}>Apply</button>\n      </div>\n    `;\n  }\n\n  private get importCode(): string {\n    return `\nimport '${this.modulePath}';\nimport { ${this.elementClassName} } from '${this.modulePath}';\n    `;\n  }\n\n  private get cssCode(): string {\n    if (!this.appliedStyles) return '';\n    return `\n\n${this.elementTag} {\n  ${this.appliedStyles}     \n}\n    `;\n  }\n\n  private get elementClassName(): string | undefined {\n    return customElements.get(this.elementTag)?.name;\n  }\n\n  private get modulePath(): string {\n    return this.labs\n      ? `@internetarchive/elements/labs/${this.elementTag}/${this.elementTag}`\n      : `@internetarchive/elements/${this.elementTag}/${this.elementTag}`;\n  }\n\n  /* Toggles visibility of section depending on whether inputs have been slotted into it */\n  private handleSettingsSlotChange(e: Event): void {\n    const slottedChildren = (e.target as HTMLSlotElement).assignedElements();\n    this.shouldShowPropertySettings = slottedChildren.length > 0;\n  }\n\n  /* Applies styles to demo component. */\n  private applyStyles(): void {\n    const appliedStyles: string[] = [];\n\n    this.styleInputs?.forEach((input) => {\n      if (!input.dataset.variable || !input.value) return;\n      appliedStyles.push(`${input.dataset.variable}: ${input.value};`);\n    });\n\n    this.appliedStyles = appliedStyles.join('\\n  ');\n  }\n\n  /* Converts a label to a usable input id, i.e. My setting -> my-setting */\n  private labelToId(label: string): string {\n    return label.toLowerCase().split(' ').join('-');\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      themeStyles,\n      css`\n        #container {\n          border: 1px solid #ccc;\n          padding: 0 16px 16px 16px;\n        }\n\n        h2 {\n          cursor: pointer;\n          margin-top: 8px;\n          margin-bottom: 8px;\n        }\n\n        h3 {\n          margin-bottom: 8px;\n        }\n\n        .slot-container,\n        .style-options {\n          background-color: var(--primary-background-color);\n          padding: 1em;\n        }\n\n        .disclosure-arrow {\n          width: 12px;\n          height: 12px;\n          transform: rotate(-90deg);\n          transition: transform 0.2s ease-in-out;\n        }\n\n        .disclosure-arrow.open {\n          transform: rotate(0deg);\n        }\n\n        .labs-icon {\n          width: 20px;\n          height: 20px;\n          margin-left: 4px;\n          filter: invert(1);\n          vertical-align: middle;\n        }\n      `,\n    ];\n  }\n}\n"]}